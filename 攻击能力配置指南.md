# æ”»å‡»èƒ½åŠ›é…ç½®æŒ‡å— - çµæ´»é…ç½®æ–¹æ¡ˆ

## ğŸ¯ **æ”¹è¿›è¯´æ˜**

ç°åœ¨æ”»å‡»èƒ½åŠ›ç±»ï¼ˆAttackAbilityClassï¼‰å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼é…ç½®ï¼Œä¸å†ç¡¬ç¼–ç è·¯å¾„ï¼

---

## âœ… **ä¸‰ç§é…ç½®æ–¹å¼**

### **æ–¹å¼ 1ï¼šåœ¨å•ä½ Blueprint ä¸­ç›´æ¥é…ç½®**ï¼ˆæ¨èï¼‰â­

#### **ä¼˜ç‚¹ï¼š**
- âœ… æœ€çµæ´»ï¼Œæ¯ä¸ªå•ä½å¯ä»¥ç‹¬ç«‹é…ç½®
- âœ… å¯ä»¥ä¸ºç‰¹æ®Šå•ä½é…ç½®è‡ªå®šä¹‰æ”»å‡»èƒ½åŠ›
- âœ… ä¸éœ€è¦éµå¾ªå›ºå®šçš„æ–‡ä»¶è·¯å¾„
- âœ… æ”¯æŒä»»æ„å‘½åçš„æ”»å‡»èƒ½åŠ›è“å›¾

#### **é…ç½®æ­¥éª¤ï¼š**

1. **æ‰“å¼€å•ä½ Blueprint**
   ```
   ä¾‹å¦‚ï¼šBP_Unit_Infantry
   ```

2. **æ‰¾åˆ° Attack Config åˆ†ç±»**
   ```
   Class Defaults â†’ Attack Config
   ```

3. **é…ç½®æ”»å‡»èƒ½åŠ›ç±»**
   ```
   Attack Config â†’ æ”»å‡»èƒ½åŠ›ç±» (AttackAbilityClass)
   ç‚¹å‡»ä¸‹æ‹‰æ¡† â†’ é€‰æ‹©æ‚¨çš„æ”»å‡»èƒ½åŠ›è“å›¾
   ä¾‹å¦‚ï¼š
   - GA_Attack_Meleeï¼ˆè¿‘æˆ˜æ”»å‡»ï¼‰
   - GA_Attack_Rangedï¼ˆè¿œç¨‹æ”»å‡»ï¼‰
   - GA_Attack_Customï¼ˆè‡ªå®šä¹‰æ”»å‡»ï¼‰
   ```

4. **ç¼–è¯‘å¹¶ä¿å­˜**

#### **ç¤ºä¾‹é…ç½®ï¼š**

**æ­¥å…µå•ä½ï¼š**
```
BP_Unit_Infantry:
â”œâ”€ Unit Config:
â”‚  â”œâ”€ Use Data Table: true
â”‚  â”œâ”€ Unit Data Table: DT_UnitData
â”‚  â””â”€ Unit Data Row Name: Infantry_Basic
â””â”€ Attack Config:
   â”œâ”€ æ”»å‡»èƒ½åŠ›ç±»: GA_Attack_Melee
   â”œâ”€ æ”»å‡»åŠ¨ç”»: AM_Infantry_Attack
   â””â”€ æŠ•å°„ç‰©ç±»: (ç•™ç©º)
```

**å¼“å…µå•ä½ï¼š**
```
BP_Unit_Archer:
â”œâ”€ Unit Config:
â”‚  â”œâ”€ Use Data Table: true
â”‚  â”œâ”€ Unit Data Table: DT_UnitData
â”‚  â””â”€ Unit Data Row Name: Archer_Basic
â””â”€ Attack Config:
   â”œâ”€ æ”»å‡»èƒ½åŠ›ç±»: GA_Attack_Ranged
   â”œâ”€ æ”»å‡»åŠ¨ç”»: AM_Archer_Attack
   â””â”€ æŠ•å°„ç‰©ç±»: BP_Projectile_Arrow
```

**è‡ªå®šä¹‰å•ä½ï¼š**
```
BP_Unit_Special:
â””â”€ Attack Config:
   â””â”€ æ”»å‡»èƒ½åŠ›ç±»: GA_Attack_Special_Custom
      ï¼ˆå¯ä»¥æ˜¯ä»»ä½•è‡ªå®šä¹‰çš„æ”»å‡»èƒ½åŠ›ï¼‰
```

---

### **æ–¹å¼ 2ï¼šæ ¹æ® UnitTypeTag è‡ªåŠ¨é€‰æ‹©**ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰

#### **ä¼˜ç‚¹ï¼š**
- âœ… ä¸éœ€è¦æ‰‹åŠ¨é…ç½®
- âœ… è‡ªåŠ¨æ ¹æ®å•ä½ç±»å‹é€‰æ‹©
- âœ… é€‚åˆæ ‡å‡†å•ä½

#### **å·¥ä½œåŸç†ï¼š**

å¦‚æœå•ä½ Blueprint ä¸­**æ²¡æœ‰é…ç½®** AttackAbilityClassï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ® UnitTypeTag å°è¯•åŠ è½½é»˜è®¤æ”»å‡»èƒ½åŠ›ï¼š

```cpp
Unit.Type.Infantry  â†’ /Game/Blueprints/GAS/Abilities/GA_Attack_Melee
Unit.Type.Cavalry   â†’ /Game/Blueprints/GAS/Abilities/GA_Attack_Melee
Unit.Type.Archer    â†’ /Game/Blueprints/GAS/Abilities/GA_Attack_Ranged
Unit.Type.Crossbow  â†’ /Game/Blueprints/GAS/Abilities/GA_Attack_Ranged
```

#### **æ³¨æ„äº‹é¡¹ï¼š**
- âš ï¸ éœ€è¦è“å›¾èµ„äº§å­˜åœ¨äºé»˜è®¤è·¯å¾„
- âš ï¸ å¦‚æœé»˜è®¤è·¯å¾„ä¸å­˜åœ¨ï¼Œä¼šè¾“å‡ºè­¦å‘Šä½†ä¸ä¼šå´©æºƒ
- âš ï¸ æ¨èä½¿ç”¨æ–¹å¼ 1ï¼ˆæ›´çµæ´»ï¼‰

---

### **æ–¹å¼ 3ï¼šåœ¨ DataTable ä¸­é…ç½®**ï¼ˆæœªæ¥æ‰©å±•ï¼‰

#### **ä¼˜ç‚¹ï¼š**
- âœ… é›†ä¸­ç®¡ç†æ‰€æœ‰å•ä½é…ç½®
- âœ… è®¾è®¡å¸ˆå‹å¥½
- âœ… æ˜“äºæ‰¹é‡ä¿®æ”¹

#### **è¯´æ˜ï¼š**
æ­¤æ–¹å¼éœ€è¦æ‰©å±• DataTable ç»“æ„ï¼Œæ·»åŠ  AttackAbilityClass å­—æ®µã€‚
å½“å‰ç‰ˆæœ¬æš‚æœªå®ç°ï¼Œå¦‚éœ€è¯·å‘ŠçŸ¥ã€‚

---

## ğŸ“Š **é…ç½®ä¼˜å…ˆçº§**

ç³»ç»Ÿä¼šæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§é€‰æ‹©æ”»å‡»èƒ½åŠ›ç±»ï¼š

```
1. AttackAbilityClassï¼ˆBlueprint ä¸­ç›´æ¥é…ç½®ï¼‰
   â†“ å¦‚æœæœªè®¾ç½®
2. æ ¹æ® UnitTypeTag è‡ªåŠ¨é€‰æ‹©ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰
   â†“ å¦‚æœåŠ è½½å¤±è´¥
3. è¾“å‡ºè­¦å‘Šå¹¶è·³è¿‡æˆäºˆ
```

---

## ğŸ¨ **ä½¿ç”¨åœºæ™¯**

### **åœºæ™¯ 1ï¼šæ ‡å‡†å•ä½ï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰**

```
ä¸éœ€è¦é…ç½® AttackAbilityClass
ç³»ç»Ÿè‡ªåŠ¨æ ¹æ® UnitTypeTag é€‰æ‹©ï¼š
- æ­¥å…µ/éª‘å…µ â†’ GA_Attack_Melee
- å¼“å…µ/å¼©å…µ â†’ GA_Attack_Ranged
```

### **åœºæ™¯ 2ï¼šç‰¹æ®Šå•ä½ï¼ˆè‡ªå®šä¹‰æ”»å‡»èƒ½åŠ›ï¼‰**

```
åœ¨ Blueprint ä¸­é…ç½® AttackAbilityClassï¼š
- ç«æªæ‰‹ â†’ GA_Attack_Gunpowder
- æ”»åŸå™¨æ¢° â†’ GA_Attack_Siege
- è‹±é›„ â†’ GA_Attack_Hero_Custom
```

### **åœºæ™¯ 3ï¼šåŒç±»å‹ä¸åŒæ”»å‡»æ–¹å¼**

```
ä¸¤ä¸ªæ­¥å…µå•ä½ï¼Œä½†æ”»å‡»æ–¹å¼ä¸åŒï¼š
- BP_Unit_Infantry_Sword â†’ GA_Attack_Melee_Sword
- BP_Unit_Infantry_Spear â†’ GA_Attack_Melee_Spear
```

### **åœºæ™¯ 4ï¼šæµ‹è¯•å’ŒåŸå‹**

```
å¿«é€Ÿæµ‹è¯•æ–°çš„æ”»å‡»èƒ½åŠ›ï¼š
- åˆ›å»º GA_Attack_Test
- åœ¨å•ä½ BP ä¸­è®¾ç½® AttackAbilityClass = GA_Attack_Test
- æ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç æˆ–é»˜è®¤é…ç½®
```

---

## ğŸ” **æ—¥å¿—è¾“å‡º**

### **ä½¿ç”¨ Blueprint é…ç½®æ—¶ï¼š**
```
LogSGGameplay: æ­¥å…µ_1: ä½¿ç”¨ Blueprint é…ç½®çš„ AttackAbilityClass: GA_Attack_Melee
LogSGGameplay: âœ“ æ­¥å…µ_1: æˆäºˆæ”»å‡»èƒ½åŠ›æˆåŠŸ (ç±»: GA_Attack_Melee, Handle: ...)
```

### **ä½¿ç”¨è‡ªåŠ¨é€‰æ‹©æ—¶ï¼š**
```
LogSGGameplay: æ­¥å…µ_1: æœªé…ç½® AttackAbilityClassï¼Œæ ¹æ® UnitTypeTag è‡ªåŠ¨é€‰æ‹©
LogSGGameplay: æ­¥å…µ_1 ä¸ºè¿‘æˆ˜å•ä½ï¼Œå°è¯•åŠ è½½é»˜è®¤ GA_Attack_Melee
LogSGGameplay: âœ“ æ­¥å…µ_1: æˆäºˆæ”»å‡»èƒ½åŠ›æˆåŠŸ (ç±»: GA_Attack_Melee, Handle: ...)
```

### **æœªé…ç½®ä¸”è‡ªåŠ¨åŠ è½½å¤±è´¥æ—¶ï¼š**
```
LogSGGameplay: âš ï¸ æ­¥å…µ_1: é»˜è®¤ GA_Attack_Melee ä¸å­˜åœ¨ï¼Œè¯·åœ¨ Blueprint ä¸­æ‰‹åŠ¨é…ç½® AttackAbilityClass
LogSGGameplay: âš ï¸ æ­¥å…µ_1: æ— æ³•ç¡®å®šæ”»å‡»èƒ½åŠ›ç±»ï¼Œè·³è¿‡æˆäºˆ
LogSGGameplay:   æç¤ºï¼šè¯·åœ¨å•ä½ Blueprint ä¸­é…ç½® 'Attack Config â†’ æ”»å‡»èƒ½åŠ›ç±»'
```

---

## âœ… **æœ€ä½³å®è·µ**

### **æ¨èåšæ³•ï¼š**

1. **æ ‡å‡†å•ä½ï¼š**
   - ä½¿ç”¨ DataTable é…ç½®åŸºç¡€å±æ€§
   - ä¸é…ç½® AttackAbilityClassï¼ˆä½¿ç”¨è‡ªåŠ¨é€‰æ‹©ï¼‰
   - ç¡®ä¿é»˜è®¤è·¯å¾„çš„è“å›¾å­˜åœ¨

2. **ç‰¹æ®Šå•ä½ï¼š**
   - ä½¿ç”¨ DataTable é…ç½®åŸºç¡€å±æ€§
   - åœ¨ Blueprint ä¸­é…ç½®è‡ªå®šä¹‰ AttackAbilityClass
   - çµæ´»å®šåˆ¶æ”»å‡»è¡Œä¸º

3. **åŸå‹å’Œæµ‹è¯•ï¼š**
   - å¿«é€Ÿåœ¨ Blueprint ä¸­åˆ‡æ¢ä¸åŒçš„æ”»å‡»èƒ½åŠ›ç±»
   - æ— éœ€ä¿®æ”¹ä»£ç æˆ–é‡æ–°ç¼–è¯‘
   - æ–¹ä¾¿ AB æµ‹è¯•ä¸åŒçš„æ”»å‡»æ–¹å¼

---

## ğŸ› **å¸¸è§é—®é¢˜**

### **é—®é¢˜ 1ï¼šæ”»å‡»èƒ½åŠ›æœªæˆäºˆ**

**æ—¥å¿—ï¼š**
```
âš ï¸ æ— æ³•ç¡®å®šæ”»å‡»èƒ½åŠ›ç±»ï¼Œè·³è¿‡æˆäºˆ
```

**è§£å†³æ–¹æ¡ˆï¼š**
```
æ–¹æ¡ˆ Aï¼ˆæ¨èï¼‰ï¼š
1. æ‰“å¼€å•ä½ Blueprint
2. åœ¨ Attack Config ä¸­é…ç½® AttackAbilityClass
3. ä¿å­˜å¹¶æµ‹è¯•

æ–¹æ¡ˆ Bï¼š
1. ç¡®ä¿é»˜è®¤è·¯å¾„çš„è“å›¾å­˜åœ¨ï¼š
   /Game/Blueprints/GAS/Abilities/GA_Attack_Melee
   /Game/Blueprints/GAS/Abilities/GA_Attack_Ranged
2. ç¡®ä¿ UnitTypeTag æ­£ç¡®è®¾ç½®
```

### **é—®é¢˜ 2ï¼šæƒ³è¦æ›´æ”¹é»˜è®¤è·¯å¾„**

**è§£å†³æ–¹æ¡ˆï¼š**
```
ä¸æ¨èä¿®æ”¹ä»£ç ä¸­çš„é»˜è®¤è·¯å¾„
æ¨èåœ¨ Blueprint ä¸­é…ç½® AttackAbilityClass
è¿™æ ·æ›´çµæ´»ï¼Œæ— éœ€é‡æ–°ç¼–è¯‘
```

### **é—®é¢˜ 3ï¼šä¸åŒå•ä½æƒ³è¦å…±äº«æ”»å‡»èƒ½åŠ›**

**è§£å†³æ–¹æ¡ˆï¼š**
```
åœ¨æ‰€æœ‰è¿™äº›å•ä½çš„ Blueprint ä¸­ï¼š
è®¾ç½®ç›¸åŒçš„ AttackAbilityClass

ä¾‹å¦‚ï¼š
BP_Unit_Infantry_A â†’ AttackAbilityClass = GA_Attack_Melee
BP_Unit_Infantry_B â†’ AttackAbilityClass = GA_Attack_Melee
BP_Unit_Infantry_C â†’ AttackAbilityClass = GA_Attack_Melee
```

---

## ğŸ“ **ä»£ç æ”¹è¿›è¯´æ˜**

### **æ”¹è¿›å‰ï¼ˆç¡¬ç¼–ç è·¯å¾„ï¼‰ï¼š**
```cpp
// âŒ ä¸çµæ´»
AttackAbilityClass = LoadClass<UGameplayAbility>(
    nullptr,
    TEXT("/Game/Blueprints/GAS/Abilities/GA_Attack_Melee.GA_Attack_Melee_C")
);
```

### **æ”¹è¿›åï¼ˆå¯é…ç½®ï¼‰ï¼š**
```cpp
// âœ… çµæ´»é…ç½®
// ä¼˜å…ˆçº§ 1ï¼šä½¿ç”¨ Blueprint é…ç½®çš„ AttackAbilityClass
TSubclassOf<UGameplayAbility> AbilityClassToGrant = AttackAbilityClass;

// ä¼˜å…ˆçº§ 2ï¼šå¦‚æœæœªé…ç½®ï¼Œæ ¹æ® UnitTypeTag è‡ªåŠ¨é€‰æ‹©
if (!AbilityClassToGrant)
{
    // å°è¯•åŠ è½½é»˜è®¤èƒ½åŠ›ç±»
    AbilityClassToGrant = LoadClass<UGameplayAbility>(...);
}
```

---

## ğŸ‰ **æ€»ç»“**

### **ç°åœ¨æ‚¨å¯ä»¥ï¼š**
- âœ… åœ¨ Blueprint ä¸­éšæ„é…ç½®æ”»å‡»èƒ½åŠ›ç±»
- âœ… ä¸å—å›ºå®šæ–‡ä»¶è·¯å¾„é™åˆ¶
- âœ… å¿«é€Ÿæµ‹è¯•ä¸åŒçš„æ”»å‡»èƒ½åŠ›
- âœ… ä¸ºç‰¹æ®Šå•ä½åˆ›å»ºè‡ªå®šä¹‰æ”»å‡»
- âœ… ç³»ç»Ÿè‡ªåŠ¨å¤„ç†æ ‡å‡†å•ä½

### **æ¨èå·¥ä½œæµç¨‹ï¼š**
```
1. åˆ›å»ºæ”»å‡»èƒ½åŠ›è“å›¾ï¼ˆä»»æ„å‘½åï¼Œä»»æ„è·¯å¾„ï¼‰
2. åœ¨å•ä½ Blueprint ä¸­é…ç½® AttackAbilityClass
3. è¿è¡Œæµ‹è¯•
4. æ— éœ€ä¿®æ”¹ä»£ç æˆ–é‡æ–°ç¼–è¯‘
```

---

**ç°åœ¨é…ç½®æ”»å‡»èƒ½åŠ›æ›´åŠ çµæ´»æ–¹ä¾¿äº†ï¼** ğŸš€
